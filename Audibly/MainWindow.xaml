<Window x:Class="Audibly.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        xmlns:local="clr-namespace:Audibly"
        mc:Ignorable="d"
        Title="Audibly" Height="750" Width="1100" WindowStartupLocation="CenterScreen">
    <Grid>
        <TabControl Style="{DynamicResource MahApps.Styles.TabControl.AnimatedSingleRow}">
            <mah:MetroTabItem Header="Library" x:Name="_libraryTab">
                <StackPanel Margin="10" Orientation="Vertical">
                    <Button Background="#007bff" Foreground="White" Margin="10" x:Name="AddBooks" Content="Add a Book" Width="200" Click="AddBooks_Click"></Button>
                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" >
                        <ListView Margin="10" x:Name="TvBox" HorizontalAlignment="Stretch" VerticalAlignment="Top">

                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="5" HorizontalAlignment="Center" ScrollViewer.CanContentScroll="False" ScrollViewer.VerticalScrollBarVisibility="Visible"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>

                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <ScrollViewer VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Disabled" >
                                        <StackPanel Height="180" Width="180" Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <Image Height="150" Width="150" Source="{Binding ImageData}" HorizontalAlignment="Left" VerticalAlignment="Top" Stretch="UniformToFill" />
                                            <TextBlock TextWrapping="WrapWithOverflow" Text="{Binding Title}" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" />
                                        </StackPanel>
                                    </ScrollViewer>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                            
                            <ListView.ItemContainerStyle>
                                <Style TargetType="ListViewItem">
                                    <EventSetter Event="PreviewMouseLeftButtonDown" Handler="ListViewItem_PreviewMouseLeftButtonDown" />
                                </Style>
                            </ListView.ItemContainerStyle>
                            
                            <ListView.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Header="Delete Book" Click="MenuItem_Click"></MenuItem>
                                </ContextMenu>
                            </ListView.ContextMenu>
                        </ListView>
                    </ScrollViewer>
                    <Label x:Name="lblInformation" Foreground="Green"  FontSize="20" HorizontalAlignment="Right" VerticalAlignment="Bottom" Opacity="0"/>
               </StackPanel>
            </mah:MetroTabItem>
        </TabControl>
    </Grid>
    
    <Window.Resources>
        <Storyboard x:Key="sbHideAnimation" >
            <DoubleAnimation Storyboard.TargetProperty="Opacity"  From="1" To="1" Duration="0:0:3" />
            <!--label shows for 3 sec-->
            <DoubleAnimation Storyboard.TargetProperty="Opacity" BeginTime="0:0:3" From="1" To="0" DecelerationRatio=".5" Duration="0:0:2" />
            <!--Fade out the label after 3 sec-->
        </Storyboard>
    </Window.Resources>
</Window>
